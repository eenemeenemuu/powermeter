var startX,startY,dist,threshold=100,allowedTime=300,elapsedTime,startTime;window.addEventListener("touchstart",function(e){var touchobj=e.changedTouches[0];function trigger(elem,name,event){elem.dispatchEvent(event),eval(elem.getAttribute("on"+name))}dist=0,startX=touchobj.pageX,startY=touchobj.pageY,startTime=(new Date).getTime(),e.preventDefault(),event.target.addEventListener("touchend",function(e){var t=e.changedTouches[0];dist=t.pageX-startX;var a="none",n=0;if((elapsedTime=(new Date).getTime()-startTime)<=allowedTime&&Math.abs(dist)>=threshold&&Math.abs(t.pageY-startY)<=100){dist>0?(a="right",n=1):(a="left",n=2);var r=new CustomEvent("swap",{target:event.target,detail:{direction:a,direction_int:n},bubbles:!0,cancelable:!0});trigger(event.target,"Swap",r)}e.preventDefault()},!1)},!1);
